# -*- mode: python -*-
# WaspSrc build script
# SConstruct file

# I love scones :3
# Very yummy.

# Import necessary functions
from SCons.Script import *

# Define the program name and sources
program_name = 'WaspSrc'
program_sources = Glob('*.c')

# Define the environment with necessary flags
env = Environment(
    CC='gcc',
    CXX='g++',
    CPPPATH=['.'],
    CFLAGS=['-Wall', '-m32', '-O2', '-fcommon', '-fdiagnostics-color=always'],
    CXXFLAGS=['-Wall', '-m32', '-O2', '-fcommon', '-fdiagnostics-color=always'],
    LIBS=['X11', 'Xext', 'm'],
    LIBPATH=['/usr/lib'],
    LINKFLAGS=['-m32'],
    JOBS='1',
)

# Function to print the required environment variables
def print_env(env):
    # Variables to print (the ones explicitly set)
    required_vars = ['CC', 'CXX', 'CPPPATH', 'CFLAGS', 'CXXFLAGS', 'LIBS', 'LIBPATH', 'LINKFLAGS', 'JOBS']
    for var in required_vars:
        if var in env:
            print(f"{var}={env[var]}")

# Print the required environment variables
print("Loading build configuration:")
print_env(env)

# Build the executable
env.Program(program_name, program_sources)

# Define the clean and distclean tasks
env.Clean(program_name, '*.o')
env.Alias('distclean', ['clean', program_name, '*.o'])
